<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" height="100%" onload="window.grdtrf_demoInit(evt)" preserveAspectRatio="xMidYMid meet" viewBox="0 0 800 600" width="100%"><g transform="translate(75 120)"><rect height="300" rx="10" ry="10" style="stroke:gray;fill:none;" width="620" x="0" y="0"/><image height="10pt" width="10pt" x="10" xlink:href="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0ZWQgYnkgSWNvTW9vbi5pbyAtLT4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHdpZHRoPSIxMHB0IiBoZWlnaHQ9IjEwcHQiIHZpZXdCb3g9IjAgMCAxMjggMTI4Ij4KPGcgaWQ9Imljb21vb24taWdub3JlIj4KCTxsaW5lIHN0cm9rZS13aWR0aD0iMSIgeDE9IiIgeTE9IiIgeDI9IiIgeTI9IiIgc3Ryb2tlPSIjNDQ5RkRCIiBvcGFjaXR5PSIiPjwvbGluZT4KPC9nPgoJPHBhdGggZD0iTTY0IDBjLTM1LjM0NyAwLTY0IDI4LjY1My02NCA2NHMyOC42NTMgNjQgNjQgNjQgNjQtMjguNjUzIDY0LTY0LTI4LjY1My02NC02NC02NHpNOTAuMTAxIDY5LjY1N2wtMzIgMzJjLTMuMTI0IDMuMTI0LTguMTg5IDMuMTI0LTExLjMxNCAwcy0zLjEyNC04LjE4OSAwLTExLjMxNGwyNi4zNDMtMjYuMzQzLTI2LjM0My0yNi4zNDNjLTMuMTI0LTMuMTI0LTMuMTI0LTguMTg5IDAtMTEuMzE0czguMTg5LTMuMTI1IDExLjMxNCAwbDMyIDMyYzEuNDQ4IDEuNDQ4IDIuMzQzIDMuNDQ4IDIuMzQzIDUuNjU3cy0wLjg5NSA0LjIwOS0yLjM0MyA1LjY1N3oiIGZpbGw9IiMwMDAwMDAiPjwvcGF0aD4KPC9zdmc+Cg==" y="8"/><text class="unselect" style="font-family:verdana sans-serif;font-size:16pt;text-anchor:start;font-weight:normal;" x="30" y="20">Gradient transformer</text><g style="font-family:sans-serif;font-size:12pt;text-decoration:underline;font-style:normal;"><a target="_blank" xlink:href="http://www.w3.org/TR/SVG/pservers.html#Gradients" xlink:show="replace"><text class="unselect" style="text-anchor:start;fill:navy;" x="10" y="280">View gradient definition</text></a><a target="_blank" xlink:href="http://www.draw-svg.appspot.com/drawsvg.html" xlink:show="replace"><text class="unselect" style="text-anchor:end;fill:navy;" x="610" y="20">Draw SVG</text></a></g><g transform="translate(-30 50) scale(0.5)"><g id="demo" style="fill:url(#lgrd6-arc);stroke:black;" transform="translate(90 10) scale(3)"><defs><linearGradient gradientUnits="objectBoundingBox" id="lgrd6-arc" spreadMethod="pad" x1="0.52" x2="0.55" y1="1" y2="0"><stop offset="0.11" style="stop-color:red;stop-opacity:1;"/><stop offset="0.265" style="stop-color:rgb(255, 140, 0);stop-opacity:0.735;"/><stop offset="0.54" stop-color="yellow"/><stop offset="0.7" stop-color="rgb(50, 205, 50)"/><stop offset="0.79" stop-color="#0071FF" stop-opacity="0.605"/><stop offset="1" stop-color="rgb(148, 0, 211)"/></linearGradient></defs><path d="M112 60c-2.917 0-5.644 0.794-8 2.158v-38.158h-38.158c1.365-2.355 2.158-5.083 2.158-8 0-8.836-7.163-16-16-16s-16 7.163-16 16c0 2.917 0.794 5.645 2.158 8h-38.158v38.158c2.356-1.364 5.083-2.158 8-2.158 8.837 0 16 7.163 16 16s-7.163 16-16 16c-2.917 0-5.644-0.794-8-2.158v38.158h38.158c-1.364-2.356-2.158-5.083-2.158-8 0-8.837 7.163-16 16-16s16 7.163 16 16c0 2.917-0.794 5.644-2.158 8h38.158v-38.158c2.356 1.365 5.083 2.158 8 2.158 8.837 0 16-7.163 16-16s-7.163-16-16-16z"/></g></g><g transform="translate(220 100)"><g id="grdtrfpanel" onmousedown="window.grdtrf_onCadre(evt)"><defs><script type="text/ecmascript"><![CDATA[

	 
// API externe (svg embed ou inline..)
window.grdtrfpanel = {
	'init' : function() {
		window.grdtrf_init();
	},
	'setTarget' : function(v,p) {
		window.grdtrf_setTarget(v,p);
	},
	'applyOnCopy' : function() {
		return window.grdtrf_applyOnCopy();	
	},
	'applyOnCustomize' : function() {
		return window.grdtrf_applyOnCustomize();	
	}
		
};

window.parent.grdtrfpanel=window.grdtrfpanel;
	 
 ]]></script></defs><defs><style type="text/css"><![CDATA[
 
text.unselect {
	pointer-events:none;
	-moz-user-select: none;
	-webkit-user-select: none;
	-ms-user-select: none;
}
#grdtrfpanel-bar {
	fill:gray;
	stroke:none;
	cursor:move;
}
#grdtrfpanel-bar:hover {
	fill:black;
	stroke:none;
	cursor:move;
}
#grdtrfpanel-rect {
	stroke-width:1;
	fill:whitesmoke;
	fill-opacity:1;
	stroke:lavender;
}
#grdtrfpanel-close {
	fill:white;
	stroke:none;
	fill-opacity:0.1;
}
#grdtrfpanel-close:hover {
	fill:navy;
	stroke:navy;
	stroke-width:1;
}
rect.textEdit0 {
	fill : papayawhip;
	fill-opacity:0.2;
	stroke:none;
	pointer-events:all;
}
rect.textEdit0:hover {
	fill : papayawhip;
	fill-opacity:0.5;
	vector-effect:non-scaling-stroke;
	stroke:Sienna;
	stroke-width:1px;
	stroke-dasharray: 1px, 1px;
	pointer-events:all;
}
rect.textEdit2 {
	fill : papayawhip;
	fill-opacity:0.5;
	vector-effect:non-scaling-stroke;
	stroke:Sienna;
	stroke-width:2px;
	pointer-events:all;
}
rect.cadre {
	stroke-width:0.4px;
	fill:whitesmoke;
	fill-opacity:1;
	stroke:gray;
}
text.header2 {
	font-family:sans-serif;
	font-style:normal;
	font-size:8px;
	fill:black;
}
text.value {
	font-size:7px;fill:black;font-family:serif;
}
rect.btn {fill:white;fill-opacity:0.01;cursor:pointer;}
rect.btn:hover {stroke:navy;stroke-width:1px;}
rect.btnDisabled {fill:gray;fill-opacity:0.3;cursor:pointer;}

text.toolTip {
	font-family:sans-serif;
	fill:navy;font-weight:normal;
}
text.title {
	font-family:Verdana Arial;
	font-weight:bold;
	font-size:8px;
	fill:black;
	text-decoration:underline;
}
#gradientTransformApplyText {
	fill:black;
	font-size:7pt;
	font-weight:normal;
}
#gradientTransformApplyRect {
	fill:white;
	fill-opacity:0.1;
	stroke:lavender;
	stroke-width:1;
}
#gradientTransformApplyRect:hover {
	fill:white;
	fill-opacity:0.1;
	stroke:black;
	stroke-width:1;
}

 ]]></style></defs><g id="grdtrfpanel-g" transform="translate(20 20)"><defs><path d="M0 0 l -2 -2 v -3 h 4 v1 h-4 h4 v 2 z" id="indexH" style="stroke-width:0.1; stroke: black;cursor:e-resize;fill:white;" transform="scale(0.3)"/></defs><g id="grdtrfpanel-gs" transform="scale(1.5)"><rect height="90" id="grdtrfpanel-rect" rx="4" ry="4" width="230" x="0" y="0"/><rect height="6" id="grdtrfpanel-bar" rx="2" ry="2" width="222" x="4" y="4"/><g transform="translate(68 28)"><rect class="cadre" height="48" id="grdtrfpanel-cadre" rx="4" ry="4" width="153" x="2" y="-10"/><rect style="fill:whitesmoke;stroke:none;"/><text class="title unselect" id="transform-title" text-anchor="start" x="12" y="-8">Transform</text><g transform="translate(10 -4)"><text class="header2 unselect" id="rotate-title" text-anchor="start" x="0" y="10">Rotate</text><g transform="translate(25 10)"><text class="value unselect" clip-path="url(#field-clip)" id="rotate-value" text-anchor="end" x="35" y="0">?</text><rect class="textEdit0" height="10" id="grdtrfpanel-rotate-rect" onmousedown="window.grdtrf_onClickTextEditRotate(evt)" width="35" x="0" y="-8"/></g></g><g transform="translate(84 -4)"><text class="header2 unselect" id="scale-title" text-anchor="start" x="0" y="10">Scale</text><g transform="translate(25 10)"><text class="value unselect" clip-path="url(#field-clip)" id="scale-value" text-anchor="end" x="35" y="0">?</text><rect class="textEdit0" height="10" id="grdtrfpanel-scale-rect" onmousedown="window.grdtrf_onClickTextEditScale(evt)" width="35" x="0" y="-8"/></g></g><g transform="translate(84 20) scale(6)"><rect height="1" id="lnscale-bar" style="fill:lavender;stroke:none;stroke-width:0.1;pointer-events:none;" width="10" x="0" y="0"/><g id="grdtrfpanel-slider-scale-g" onmousedown="window.grdtrf_onLogScaleRect(evt)" style="fill:url(#rotate-grd);stroke:none;stroke-width:0.1;cursor:pointer;"><rect height="1" width="1" x="0" y="0"/><rect height="1" width="1" x="1" y="0"/><rect height="1" width="1" x="2" y="0"/><rect height="1" width="1" x="3" y="0"/><rect height="1" width="1" x="4" y="0"/><rect height="1" width="1" x="5" y="0"/><rect height="1" width="1" x="6" y="0"/><rect height="1" width="1" x="7" y="0"/><rect height="1" width="1" x="8" y="0"/><rect height="1" width="1" x="9" y="0"/></g><path d="M0 2h2v-1v1h2v-1v1h2v-1v1h2v-1v1h2v-1v1h2v-1v1h2v-1v1h2v-1v1h2v-1v1h2" style="stroke:black;stroke-width:0.1;pointer-events:none;" transform="scale(0.5)"/><use id="lnscale-index" x="0" xlink:href="#indexH" y="0.4"/><text class="unselect" id="lnscale-value" style="visibility:hidden;fill:none;" text-anchor="start" x="0" y="0"/></g><g transform="translate(10 18)"><defs><clipPath id="rotate-ag-clip"><rect height="20" width="40" x="-20" y="-20"/></clipPath><linearGradient id="rotate-grd" spreadMethod="pad" x1="0%" x2="0%" y1="0%" y2="100%"><stop offset="0%" style="stop-color:lightblue;  stop-opacity:0.2;"/><stop offset="100%" style="stop-color:darkblue;  stop-opacity:0.4;"/></linearGradient></defs><g transform="translate(30 12)"><g clip-path="url(#rotate-ag-clip)" id="grdtrfpanel-rotate-path-g" onmousedown="window.grdtrf_onRotatePath(evt)" style="fill:url(#rotate-grd);stroke:none;stroke-width:0.4;cursor:pointer;"><path d="M-20,0a20,20,0,0,1,40,0h-4a16,16,0,0 0,-32,0z" transform="rotate(0)"/><path d="M-20,0a20,20,0,0,1,40,0h-4a16,16,0,0 0,-32,0z" transform="rotate(30)"/><path d="M-20,0a20,20,0,0,1,40,0h-4a16,16,0,0 0,-32,0z" transform="rotate(60)"/><path d="M-20,0a20,20,0,0,1,40,0h-4a16,16,0,0 0,-32,0z" transform="rotate(90)"/><path d="M-20,0a20,20,0,0,1,40,0h-4a16,16,0,0 0,-32,0z" transform="rotate(120)"/><path d="M-20,0a20,20,0,0,1,40,0h-4a16,16,0,0 0,-32,0z" transform="rotate(150)"/></g><path d="M-20,0a20,20,0,0,1,40,0h-4a16,16,0,0 0,-32,0z" style="fill:none;stroke:none;"/><g id="rotate-ag"><line style="stroke:black;fill:none;stroke-width:1px;" x1="0" x2="18" y1="0" y2="0"/><circle cx="0" cy="0" r="2" style="stroke:none;fill:black;"/><circle cx="12" cy="0" id="rotate-ag-c" r="3" style="stroke:black;fill:white;cursor:pointer;"/></g></g></g></g><g transform="translate(2 28)"><rect class="cadre" height="48" id="grdtrfpanel-grd-cadre" rx="4" ry="4" width="60" x="2" y="-10"/><rect style="fill:whitesmoke;stroke:none;"/><text class="title unselect" id="gradient-title" text-anchor="start" x="12" y="-8">Gradient</text><g id="grdtrfpanel-copy-g" onmousedown="window.grdtrf_onCopy(evt)" transform="translate(8 0)"><image height="20" width="20" x="1" xlink:href="data:image/gif;base64,R0lGODlhEAAQALMAAD8/XwCAgD9/f1+fn5+/v9/fv//fn////8DAwJ+fn4CAgF9fX////wAAAAAAAAAAACH5BAEAAAwALAAAAAAQABAAAARUkMlJq1Q4KzuVOeCRAByjhIeWUacwEB6qLF1YnLJBm4cL96/UYsgD3VA2Wut1CgyehENBacMhpzxf8xnEWo9IqRJBRmyhYtNwgQmnK4qyHAtf24cRADs=" y="1"/><rect class="btnDisabled" height="22" id="copyBtnRect" onmouseout="window.grdtrf_hideTip(evt,'copy-tip');" onmouseover="window.grdtrf_showTip(evt,'copy-tip');" width="22" x="0" y="0"/></g><g id="grdtrfpanel-customize-g" onmousedown="window.grdtrf_onCustomize(evt)" transform="translate(36 0)"><svg height="20" viewBox="0 0 128 128" width="20" x="2" y="1"><g style="fill:black;stroke:none;"><path d="M64 0h-54.222c-5.4 0-9.778 4.378-9.778 9.778v92.445c0 4.792 3.45 8.772 8 9.609v-102.053c0-0.98 0.797-1.778 1.778-1.778h62.222l-8-8z"/><path d="M112 88h-8v16h-16v8h16v16h8v-16h16v-8h-16z"/><path d="M25.778 120c-0.98 0-1.778-0.797-1.778-1.778v-92.445c0-0.98 0.797-1.778 1.778-1.778h46.222v24.080c0 4.374 3.546 7.92 7.92 7.92h24.080v24h8v-32l-32-32h-54.222c-5.4 0-9.778 4.378-9.778 9.778v92.445c0 5.4 4.378 9.778 9.778 9.778h70.222v-8h-70.222zM80 27.314l20.686 20.686h-20.686v-20.686z"/></g></svg><rect class="btnDisabled" height="22" id="customizeBtnRect" onmouseout="window.grdtrf_hideTip(evt,'customize-tip');" onmouseover="window.grdtrf_showTip(evt,'customize-tip');" width="22" x="0" y="0"/></g><g font-size="7" text-anchor="middle" transform="translate(18 32)"><text class="toolTip unselect" id="copy-tip" style="visibility:hidden;" x="0" y="0">Copy</text><text class="toolTip unselect" id="customize-tip" style="visibility:hidden;" x="28" y="0">Extends</text></g></g><g id="gradientTransformCloseGroup" onmousedown="window.grdtrf_onClose(evt)" transform="translate(234 4)"><image height="10" width="10" x="0" xlink:href="data:image/gif;base64,R0lGODlhDAAMAJEAAFNgvMrZ93yL0Oz1/CH5BAAAAAAALAAAAAAMAAwAAAImlI83yw0yRGgBvlEnluPukC3exonQUpXdmYXrh3KXur3NDeT6rhcAOw==" y="0"/><rect height="10" id="grdtrfpanel-close" width="10" x="0" y="0"/></g><g font-size="7" style="font-family:Serif;font-style:italic;"><defs><clipPath id="gradient-id-clip"><rect height="10" style="fill:salmon" width="140" x="6" y="69"/></clipPath></defs><text class="unselect" clip-path="url(#gradient-id-clip)" id="gradient-id" x="8" y="76">ID</text><text class="unselect" text-anchor="start" x="8" y="84">Gradient transformer tool</text></g><text id="gradientTransformApplyText" style="text-anchor:end;" x="222" y="82"> OK </text><rect id="gradientTransformApplyRect" onmousedown="window.grdtrf_onApply(evt)" rx="2" ry="2"/></g></g><defs id="JS"><script type="text/ecmascript"><![CDATA[var svgtk={NS:"http://www.w3.org/2000/svg",XLINK_NS:"http://www.w3.org/1999/xlink",EVT_TYPE_MOUSE_DOWN:"mousedown",EVT_TYPE_MOUSE_MOVE:"mousemove",EVT_TYPE_MOUSE_UP:"mouseup",EVT_TYPE_TOUCH_START:"touchstart",EVT_TYPE_TOUCH_MOVE:"touchmove",EVT_TYPE_TOUCH_END:"touchend",provideNamespace:function(b){"undefined"==typeof window[b]&&(window[b]={})},removeA:function(b,c){b.removeAttribute(c);return b},removeCursor:function(b){return svgtk.removeStyleAttribute(b,"cursor")},removeFill:function(b){return svgtk.removeStyleAttribute(b,
"fill")},removeFillOpacity:function(b){return svgtk.removeStyleAttribute(b,"fill-opacity")},removeFillRule:function(b){return svgtk.removeStyleAttribute(b,"fill-rule")},removeFontFamily:function(b){return svgtk.removeStyleAttribute(b,"font-family")},removeFontSize:function(b){return svgtk.removeStyleAttribute(b,"font-size")},removeFontStyle:function(b){return svgtk.removeStyleAttribute(b,"font-style")},removeFontStretch:function(b){return svgtk.removeStyleAttribute(b,"font-stretch")},removeFontVariant:function(b){return svgtk.removeStyleAttribute(b,
"font-variant")},removeFontWeight:function(b){return svgtk.removeStyleAttribute(b,"font-weight")},removeHref:function(b,c){b.removeAttributeNS(svgtk.XLINK_NS,"href");return b},removeMarkerStart:function(b){return svgtk.removeStyleAttribute(b,"marker-start")},removeMarkerMid:function(b){return svgtk.removeStyleAttribute(b,"marker-mid")},removeMarkerEnd:function(b){return svgtk.removeStyleAttribute(b,"marker-end")},removePointerEvents:function(b){return svgtk.removeStyleAttribute(b,"pointer-events")},
removeStroke:function(b){return svgtk.removeStyleAttribute(b,"stroke")},removeStrokeWidth:function(b){return svgtk.removeStyleAttribute(b,"stroke-width")},removeStrokeDash:function(b){return svgtk.removeStyleAttribute(b,"stroke-dasharray")},removeStrokeDashOffset:function(b){return svgtk.removeStyleAttribute(b,"stroke-dashoffset")},removeStrokeLinecap:function(b){return svgtk.removeStyleAttribute(b,"stroke-linecap")},removeStrokeLinejoin:function(b){return svgtk.removeStyleAttribute(b,"stroke-linejoin")},
removeStrokeMiterLimit:function(b){return svgtk.removeStyleAttribute(b,"stroke-miterlimit")},removeStrokeOpacity:function(b){return svgtk.removeStyleAttribute(b,"stroke-opacity")},removeStyle:function(b){return svgtk.removeA(b,"style")},removeTextAnchor:function(b){return svgtk.removeStyleAttribute(b,"text-anchor")},removeTextDecoration:function(b){return svgtk.removeStyleAttribute(b,"text-decoration")},setA:function(b,c,d){b.setAttribute(c,d);return b},setClass:function(b,c){return svgtk.setA(b,
"class",c)},getD:function(b){return svgtk.getA(b,"d")},getDur:function(b){return svgtk.getA(b,"dur")},getId:function(b){return svgtk.getA(b,"id")},getGradientUnits:function(b){return svgtk.getA(b,"gradientUnits")},getMarkerHeight:function(b){return svgtk.getA(b,"markerHeight")},getMarkerWidth:function(b){return svgtk.getA(b,"markerWidth")},getMarkerUnits:function(b){return svgtk.getA(b,"markerUnits")},getPatternUnits:function(b){return svgtk.getA(b,"patternUnits")},getPatternContentUnits:function(b){return svgtk.getA(b,
"patternContentUnits")},getSpreadMethod:function(b){return svgtk.getA(b,"spreadMethod")},getTextAnchor:function(b){return svgtk.getA(b,"text-anchor")},getTextDecoration:function(b){return svgtk.getA(b,"text-decoration")},setClipPath:function(b,c){return svgtk.setA(b,"clip-path","url(#"+c+")")},setCursor:function(b,c){return svgtk.setStyleAttribute(b,"cursor",c)},setFill:function(b,c){return svgtk.setStyleMemberAttribute(b,"fill",c)},setFillGrd:function(b,c){return svgtk.setFillUrlId(b,c)},setFillOpacity:function(b,
c){return svgtk.setStyleAttribute(b,"fill-opacity",c)},setFillPattern:function(b,c){return svgtk.setFillUrlId(b,c)},setFillRule:function(b,c){return svgtk.setStyleAttribute(b,"fill-rule",c)},setFillUrlId:function(b,c){svgtk.removeFill(b);return svgtk.setA(b,"fill","url(#"+c+")")},setFilterId:function(b,c){return svgtk.setStyleMemberAttribute(b,"filter","url(#"+c+")")},setGradientUnits:function(b,c){return svgtk.setA(b,"gradientUnits",c)},setHeight:function(b,c){return svgtk.setA(b,"height",c)},setId:function(b,
c){return svgtk.setA(b,"id",c)},setMarker:function(b,c,d){return svgtk.setStyleAttribute(b,c,"url(#"+d+")")},setMarkerEnd:function(b,c){return svgtk.setStyleAttribute(b,"marker-end","url(#"+c+")")},setMarkerMid:function(b,c){return svgtk.setStyleAttribute(b,"marker-mid","url(#"+c+")")},setMarkerStart:function(b,c){return svgtk.setStyleAttribute(b,"marker-start","url(#"+c+")")},setMarkerHeight:function(b,c){return svgtk.setA(b,"markerHeight",c)},setMarkerWidth:function(b,c){return svgtk.setA(b,"markerWidth",
c)},setMarkerUnits:function(b,c){return svgtk.setA(b,"markerUnits",c)},setPatternContentUnits:function(b,c){return svgtk.setA(b,"patternContentUnits",c)},setPatternUnits:function(b,c){return svgtk.setA(b,"patternUnits",c)},setSpreadMethod:function(b,c){return svgtk.setA(b,"spreadMethod",c)},setTextAnchor:function(b,c){return svgtk.setStyleAttribute(b,"text-anchor",c)},setTextDecoration:function(b,c){return svgtk.setStyleAttribute(b,"text-decoration",c)},setRect:function(b,c,d){return svgtk.setHeight(svgtk.setWidth(svgtk.setY(svgtk.setX(b,
c.x-d),c.y-d),c.width+d+d),c.height+d+d)},setElementPreviousRectBox:function(b,c){return svgtk.setRect(svgtk.getPreviousSibling(b,"rect"),b.getBBox(),c)},setElementNextRectBox:function(b,c){return svgtk.setRect(svgtk.getNextSibling(b,"rect"),b.getBBox(),c)},setElementRectBox:function(b,c){return svgtk.setRect(svgtk.getNextSibling(b,"rect"),b.getBBox(),c)},setRefX:function(b,c){return svgtk.setA(b,"refX",c)},setRefY:function(b,c){return svgtk.setA(b,"refY",c)},setPointerEvents:function(b,c){return svgtk.setStyleAttribute(b,
"pointer-events",c)},setFontFamily:function(b,c){return svgtk.setStyleAttribute(b,"font-family",c)},setFontWeight:function(b,c){return svgtk.setStyleAttribute(b,"font-weight",c)},setFontSize:function(b,c){return svgtk.setPtyLength(b,"font-size",c)},setFontStyle:function(b,c){return svgtk.setStyleAttribute(b,"font-style",c)},setFontStretch:function(b,c){return svgtk.setStyleAttribute(b,"font-stretch",c)},setFontVariant:function(b,c){return svgtk.setStyleAttribute(b,"font-variant",c)},setFrom:function(b,
c){return svgtk.setA(b,"from",c)},setStartOffset:function(b,c){return svgtk.setStyleAttribute(b,"startOffset",c)},setStopColor:function(b,c){return svgtk.setStyleAttribute(b,"stop-color",c)},setStopOpacity:function(b,c){return svgtk.setStyleAttribute(b,"stop-opacity",c)},setStroke:function(b,c){return svgtk.setStyleMemberAttribute(b,"stroke",c)},setStrokeDash:function(b,c){return svgtk.setStyleAttribute(b,"stroke-dasharray",c)},setStrokeDashOffset:function(b,c){return svgtk.setStyleAttribute(b,"stroke-dashoffset",
c)},setStrokeGrd:function(b,c){return svgtk.setStrokeUrlId(b,c)},setStrokeLinecap:function(b,c){return svgtk.setStyleAttribute(b,"stroke-linecap",c)},setStrokeLinejoin:function(b,c){return svgtk.setStyleAttribute(b,"stroke-linejoin",c)},setStrokeMiterLimit:function(b,c){return svgtk.setStyleAttribute(b,"stroke-miterlimit",c)},setStrokeOpacity:function(b,c){return svgtk.setStyleAttribute(b,"stroke-opacity",c)},setStrokePattern:function(b,c){return svgtk.setStrokeUrlId(b,c)},setStrokeUrlId:function(b,
c){svgtk.removeStroke(b);return svgtk.setA(b,"stroke","url(#"+c+")")},setStrokeWidth:function(b,c){return svgtk.setPtyLength(b,"stroke-width",c)},setStyle:function(b,c){return svgtk.setA(b,"style",c)},setTo:function(b,c){return svgtk.setA(b,"to",c)},setTransform:function(b,c){return svgtk.setA(b,"transform",c)},setVectorEffect:function(b,c){return svgtk.setStyleAttribute(b,"vector-effect",c)},setWidth:function(b,c){return svgtk.setA(b,"width",c)},setX:function(b,c){return svgtk.setA(b,"x",c)},setX1:function(b,
c){return svgtk.setA(b,"x1",c)},setX2:function(b,c){return svgtk.setA(b,"x2",c)},setY:function(b,c){return svgtk.setA(b,"y",c)},setY1:function(b,c){return svgtk.setA(b,"y1",c)},setY2:function(b,c){return svgtk.setA(b,"y2",c)},setCx:function(b,c){return svgtk.setA(b,"cx",c)},setCy:function(b,c){return svgtk.setA(b,"cy",c)},setD:function(b,c){return svgtk.setA(b,"d",c)},setDur:function(b,c){return svgtk.setA(b,"dur",c)},setFx:function(b,c){return svgtk.setA(b,"fx",c)},setFy:function(b,c){return svgtk.setA(b,
"fy",c)},setHref:function(b,c){b.setAttributeNS(svgtk.XLINK_NS,"href",c);return b},setR:function(b,c){return svgtk.setA(b,"r",c)},getCursor:function(b){return svgtk.getStyleAttribute(b,"cursor")},getFill:function(b){return svgtk.getStyleMemberAttribute(b,"fill")},getFillGrd:function(b){return svgtk.getUrlAnchor(svgtk.getFill(b))},getFillOpacity:function(b){return svgtk.getStyleAttribute(b,"fill-opacity")},getFillPattern:function(b){return svgtk.getUrlAnchor(svgtk.getFill(b))},getFillRule:function(b){return svgtk.getStyleAttribute(b,
"fill-rule")},getFontFamily:function(b){return svgtk.getStyleAttribute(b,"font-family")},getFontSize:function(b){return svgtk.getStyleAttribute(b,"font-size")},getFontStyle:function(b){return svgtk.getStyleAttribute(b,"font-style")},getFontStretch:function(b){return svgtk.getStyleAttribute(b,"font-stretch")},getFontVariant:function(b){return svgtk.getStyleAttribute(b,"font-variant")},getFontWeight:function(b){return svgtk.getStyleAttribute(b,"font-weight")},getHref:function(b){return b.getAttributeNS(svgtk.XLINK_NS,
"href")},getMarker:function(b,c){return svgtk.getUrlAnchor(svgtk.getStyleAttribute(b,c))},getMarkerStart:function(b){return svgtk.getUrlAnchor(svgtk.getStyleAttribute(b,"marker-start"))},getMarkerMid:function(b){return svgtk.getUrlAnchor(svgtk.getStyleAttribute(b,"marker-mid"))},getMarkerEnd:function(b){return svgtk.getUrlAnchor(svgtk.getStyleAttribute(b,"marker-end"))},getPointerEvents:function(b){return svgtk.getStyleAttribute(b,"pointer-events")},getFilter:function(b){return svgtk.getStyleMemberAttribute(b,
"filter")},getFilterId:function(b){return svgtk.getUrlAnchor(svgtk.getFilter(b))},getStartOffset:function(b){return svgtk.getStyleAttribute(b,"startOffset")},getStopColor:function(b){return svgtk.getStyleAttribute(b,"stop-color")},getStopOpacity:function(b){return svgtk.getStyleAttribute(b,"stop-opacity")},getStroke:function(b){return svgtk.getStyleMemberAttribute(b,"stroke")},getStrokeDash:function(b){return svgtk.getStyleAttribute(b,"stroke-dasharray")},getStrokeDashOffset:function(b){return svgtk.getStyleAttribute(b,
"stroke-dashoffset")},getStrokeGrd:function(b){return svgtk.getUrlAnchor(svgtk.getStroke(b))},getStrokeLinecap:function(b){return svgtk.getStyleAttribute(b,"stroke-linecap")},getStrokeLinejoin:function(b){return svgtk.getStyleAttribute(b,"stroke-linejoin")},getStrokeMiterLimit:function(b){return svgtk.getStyleAttribute(b,"stroke-miterlimit")},getStrokeOpacity:function(b){return svgtk.getStyleAttribute(b,"stroke-opacity")},getStrokeWidth:function(b){return svgtk.getStyleAttribute(b,"stroke-width")},
getStyle:function(b){return svgtk.getA(b,"style")},getTransform:function(b){return svgtk.getA(b,"transform")},getVisibility:function(b){return svgtk.getStyleAttribute(b,"visibility")},getUrlAnchor:function(b){if(null!=b&&"url("==b.substr(0,4)&&-1!=b.indexOf("#")&&-1!=b.indexOf(")")){b=b.substring(b.indexOf("#")+1,b.indexOf(")"));if("'"==b.charAt(b.length-1)||'"'==b.charAt(b.length-1))b=b.substr(0,b.length-1);return b}return null},show:function(b){return svgtk.setVisibility(b,"visible")},hide:function(b){return svgtk.setVisibility(b,
"hidden")},isVisible:function(b){b=svgtk.getVisibility(b);return null==b||"visible"==b},setVisible:function(b,c){return svgtk.setVisibility(b,1==c?"visible":"hidden")},zapClassName:function(b,c,d){return svgtk.getClass(b).replace(c,d)},zapClassNameSuffix:function(b,c){var d=svgtk.getClass(b);return d.substring(0,d.length-1)+c},getClassSuffix:function(b){b=svgtk.getClass(b);return null==b?null:b.charAt(b.length-1)},setClassSuffix:function(b,c){return svgtk.setClass(b,svgtk.zapClassNameSuffix(b,c))},
addListener:function(b,c,d){b.addEventListener(c,d,!1);return b},removeListener:function(b,c,d){b.removeEventListener(c,d,!1);return b},getA:function(b,c){return b.getAttribute(c)},getF:function(b,c){var d=svgtk.getA(b,c);return null==d||""==d?0:parseFloat(d)},getClass:function(b){return svgtk.getA(b,"class")},getHeight:function(b){return svgtk.getF(b,"height")},getX:function(b){return svgtk.getF(b,"x")},getY:function(b){return svgtk.getF(b,"y")},getX1:function(b){return svgtk.getF(b,"x1")},getY1:function(b){return svgtk.getF(b,
"y1")},getX2:function(b){return svgtk.getF(b,"x2")},getY2:function(b){return svgtk.getF(b,"y2")},getWidth:function(b){return svgtk.getF(b,"width")},appendChild:function(b,c){return b.appendChild(b.ownerDocument.createElementNS(svgtk.NS,c))},find:function(b){return document.getElementById(b)},firstChildElement:function(b){for(b=b.firstChild;null!=b;b=b.nextSibling)if(b.tagName)return b;return null},get:function(b){var c=svgtk.find(b);if(null==c)throw"Element '"+b+"' not found";return c},findFirstChild:function(b,
c){for(var d=b.firstChild;null!=d;d=d.nextSibling)if(d.tagName&&d.tagName==c)return d;return null},getFirstChild:function(b,c){for(var d=b.firstChild;null!=d;d=d.nextSibling)if(d.tagName&&d.tagName==c)return d;throw"getFirstChild ("+b+"(id="+b.id+"),"+c+"), element not found";},findChildElementIndex:function(b,c){for(var d=b.firstChild,f=0;null!=d;d=d.nextSibling)if(d.tagName){if(d==c)return f;f++}return-1},findChildElement:function(b,c){for(var d=b.firstChild,f=0;null!=d;d=d.nextSibling)if(d.tagName){if(c==
f)return d;f++}return null},findTreeElementIndex:function(b,c){for(var d=b,f=0,g=null;null!=d;d=null==g?null:g.pop())for(d=d.firstChild;null!=d;d=d.nextSibling)if(d.tagName){if(d==c)return f;f++;null==g&&(g=[]);g.push(d)}return-1},findTreeElement:function(b,c){for(var d=b,f=0,g=null;null!=d;d=null==g?null:g.pop())for(d=d.firstChild;null!=d;d=d.nextSibling)if(d.tagName){if(c==f)return d;f++;null==g&&(g=[]);g.push(d)}return null},visitTree:function(b,c){for(var d=b,f=0,g=null;null!=d;d=null==g?null:
g.pop())for(d=d.firstChild;null!=d;d=d.nextSibling)d.tagName&&(null!=c&&c(f,d),f++,null==g&&(g=[]),g.push(d));return f},visitChildren:function(b,c){for(var d=b.firstChild,f=0;null!=d;d=d.nextSibling)d.tagName&&(null!=c&&c(f,d),f++);return f},getLastChild:function(b,c){for(var d=b.lastChild;null!=d;d=d.previousSibling)if(d.tagName&&d.tagName==c)return d;throw"getLastChild ("+b+","+c+"), element not found";},nextSiblingElement:function(b){for(b=b.nextSibling;null!=b;b=b.nextSibling)if(b.tagName)return b;
return null},findNextSibling:function(b,c){for(var d=b.nextSibling;null!=d;d=d.nextSibling)if(d.tagName&&d.tagName==c)return d;return null},getNextSibling:function(b,c){for(var d=b.nextSibling;null!=d;d=d.nextSibling)if(d.tagName&&d.tagName==c)return d;throw"getNextSibling ("+b+","+c+"), element not found";},findPreviousSibling:function(b,c){for(var d=b.previousSibling;null!=d&&(!d.tagName||d.tagName!=c);d=d.previousSibling);return d},getPreviousSibling:function(b,c){for(var d=b.previousSibling;null!=
d;d=d.previousSibling)if(d.tagName&&d.tagName==c)return d;throw"getPreviousSibling ("+b+","+c+"), element not found";},getPreviousSiblingElement:function(b){for(var c=b.previousSibling;null!=c;c=c.previousSibling)if(c.tagName)return c;throw"getPreviousSibling ("+b+"), element not found";},findPreviousSiblingElement:function(b){for(b=b.previousSibling;null!=b;b=b.previousSibling)if(b.tagName)return b;return null},removeFromParent:function(b){return b.parentNode.removeChild(b)},removeChildren:function(b){for(;null!=
b.firstChild;)b.removeChild(b.firstChild)},getFirstChildElement:function(b){for(var c=b.firstChild;null!=c;c=c.nextSibling)if(c.tagName)return c;throw"getFirstChildElement ("+b+"), child element not found";},getNextSiblingElement:function(b){for(var c=b.nextSibling;null!=c;c=c.nextSibling)if(c.tagName)return c;throw"getNextSibling ("+b+"), element not found";},getChildCount:function(b,c){for(var d=0,f=b.firstChild;null!=f;f=f.nextSibling)!f.tagName||null!=c&&f.tagName!=c||d++;return d},getRefX:function(b){return svgtk.getF(b,
"refX")},getRefY:function(b){return svgtk.getF(b,"refY")},setTextData:function(b,c){null==b.firstChild||null==b.firstChild.data?b.appendChild(document.createTextNode(c)):b.firstChild.data=c;return b},getTextData:function(b){return null==b.firstChild?null:b.firstChild.data},getTextDataLength:function(b){return null==b.firstChild?0:b.firstChild.data.length},appendTextTspan:function(b,c){var d=svgtk.appendChild(b,"text");svgtk.appendChild(d,"tspan").appendChild(document.createTextNode(c));return d},
appendRect:function(b,c,d,f,g){return svgtk.setX(svgtk.setY(svgtk.setWidth(svgtk.setHeight(svgtk.appendChild(b,"rect"),g),f),d),c)},getPix2SvgScale:function(b){b=b.getScreenCTM().inverse();return svgtk.hypot(b.a,b.d)/Math.SQRT2},getRoot:function(b){if(null==b)throw"svgtk.getRoot node is null";if(null==b.ownerDocument)throw"svgtk.getRoot node.ownerDocument is null";if("undefined"!=typeof b.ownerDocument.rootElement&&null!=b.ownerDocument.rootElement)return b.ownerDocument.rootElement;if(null==b.ownerSVGElement){if("svg"==
b.tagName)return b;for(var c=null,d=b.parentNode;null!=d;d=d.parentNode)"svg"==d.tagName&&(c=d);if(null!=c)return c;throw"svgtk.getRoot unexpected node "+b+" "+typeof b.ownerSVGElement+" tag '"+b.tagName+"' should be'svg'";}for(d=b.ownerSVGElement;null!=d.ownerSVGElement;)d=d.ownerSVGElement;if("svg"==d.tagName)return d;throw"svgtk.getRoot unexpected node "+d+" tag '"+d.tagName+"' should be 'svg'";},getSVGIncludedMatrix:function(b){var c=b.x.baseVal.value,d=b.y.baseVal.value,f=b.width.baseVal.value,
g=b.height.baseVal.value,h=b.viewBox.baseVal;if(0==h.width||0==h.height)h=b.getBBox();var k=h.width/h.height,l=b.preserveAspectRatio.baseVal.align,m=b.preserveAspectRatio.baseVal.meetOrSlice==SVGPreserveAspectRatio.SVG_MEETORSLICE_MEET;b=b.createSVGMatrix();var n=f/g;b=b.translate(c,d);if(l==SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_NONE)b=b.scale(f/h.width,g/h.height),b=b.translate(-h.x,-h.y);else if(k<n&&m||k>=n&&!m)switch(c=g/h.height,b=b.scale(c,c),l){case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMID:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMAX:b=
b.translate(-h.x,-h.y);break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMIN:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMID:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMAX:b=b.translate(-h.x-(h.width-f*h.height/g)/2,-h.y);break;default:b.translate(-h.x-(h.width-f*h.height/g),-h.y)}else switch(c=f/h.width,b=b.scale(c,c),l){case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMIN:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMIN:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMIN:b=
b.translate(-h.x,-h.y);break;case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMINYMID:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMIDYMID:case SVGPreserveAspectRatio.SVG_PRESERVEASPECTRATIO_XMAXYMID:b=b.translate(-h.x,-h.y-(h.height-g*h.width/f)/2);break;default:b=b.translate(-h.x,-h.y-(h.height-g*h.width/f))}return b},getTransformToElement:function(b,c){if(svgtk.testAgentFireFox)return b.getTransformToElement?b.getTransformToElement(c):c.getScreenCTM().inverse().multiply(b.getScreenCTM());
for(var d=b,f="svg"==b.tagName;!f&&(d=d.parentNode)!=c;)d.tagName&&"svg"==d.tagName&&(f=!0);if(0==f)return b.getTransformToElement?b.getTransformToElement(c):c.getScreenCTM().inverse().multiply(b.getScreenCTM());for(d=svgtk.getTransformMatrix(b);(b=b.parentNode)!=c;)b.tagName&&(d="svg"==b.tagName?d.multiply(svgtk.getSVGIncludedMatrix(b)):svgtk.getTransformMatrix(b).multiply(d));return d},getTransformToDocument:function(b){return svgtk.getTransformToElement(b,svgtk.getRoot(b))},getTransformToDocumentScreenCTM:function(b){for(var c=
b.getScreenCTM();(b=b.parentNode)!=document;)c=b.getScreenCTM().multiply(c);return c},translateElement:function(b,c,d){c=svgtk.getRoot(b).createSVGMatrix().translate(c,d);return svgtk.transformElement(b,c)},scaleElement:function(b,c){var d=svgtk.getRoot(b).createSVGMatrix().scale(c);return svgtk.transformElement(b,d)},rotateElement:function(b,c){var d=svgtk.getRoot(b).createSVGMatrix().rotate(c);return svgtk.transformElement(b,d)},transformElement:function(b,c){var d=b.transform.baseVal;0!=d.numberOfItems?
(d.insertItemBefore(d.createSVGTransformFromMatrix(c),0),d.consolidate()):d.initialize(d.createSVGTransformFromMatrix(c));return b},setTransformTranslate:function(b,c,d){c=svgtk.getRoot(b).createSVGMatrix().translate(c,d);svgtk.setTransformMatrix(b,c);return b},setTransformScale:function(b,c){return svgtk.setTransformMatrix(b,svgtk.getRoot(b).createSVGMatrix().scale(c))},setTransformRotate:function(b,c){var d=svgtk.getRoot(b).createSVGMatrix().rotate(c);svgtk.setTransformMatrix(b,d);return b},setTransformMatrix:function(b,
c){var d=b.transform.baseVal,f=d.createSVGTransformFromMatrix(c);d.initialize(f);return b},getTransformMatrix:function(b){var c=b.transform.baseVal,d=c.numberOfItems;if(0!=d){b=c.getItem(d-1).matrix;for(--d;0!=d;d--)b=c.getItem(d-1).matrix.multiply(b);return b}return svgtk.getRoot(b).createSVGMatrix()},getSVGIncludedRect:function(b){var c=b.createSVGRect();c.x=b.x.baseVal.value;c.y=b.y.baseVal.value;c.width=b.width.baseVal.value;c.height=b.height.baseVal.value;return c},setSVGPoint:function(b,c){b.x=
c.x;b.y=c.y;return b},transformPoint:function(b,c){return b.matrixTransform(c)},setSVGRect:function(b,c){b.x=c.x;b.y=c.y;b.width=c.width;b.height=c.height;return b},copySVGRect:function(b,c){var d=b.createSVGRect();d.x=c.x;d.y=c.y;d.width=c.width;d.height=c.height;return d},setSVGRectCenter:function(b,c,d){b.x=c-b.width/2;b.y=d-b.height/2;return b},getViewBoxRect:function(b){return b.viewBox.baseVal},inflateSVGRect:function(b,c,d,f){b=b.createSVGRect();b.x=c.x-d/2;b.y=c.y-f/2;b.width=c.width+d;b.height=
c.height+f;return b},translateSVGRect:function(b,c,d,f){b=b.createSVGRect();b.x=c.x+d;b.y=c.y+f;b.width=c.width;b.height=c.height;return b},scaleSVGRectByCenter:function(b,c,d,f){return svgtk.inflateSVGRect(b,c,c.width*(d-1),c.height*(f-1))},setValueInSpecifiedUnits:function(b,c){b.valueInSpecifiedUnits=c},hasStyleProperty:function(b,c){return null!=svgtk.getStylePropertyValue(b,c)},setPtyLength:function(b,c,d){if(null==d||/[a-z]*/.test(d))return svgtk.setStyleAttribute(b,c,d);svgtk.removeStyleProperty(b,
c);return svgtk.setA(b,c,d)},getStyleMember:function(b,c){var d=svgtk.getStyle(b);if(null!=d&&""!=d){var f=d.indexOf(c+":",0);if(-1!=f){var g=d.indexOf(":",f),f=d.indexOf(";",f);return-1!=f?d.substring(g+1,f):d.substring(g+1,d.length)}}return null},setStyleMember:function(b,c,d){var f=svgtk.getStyle(b);if(null!=f&&""!=f){var g=f.indexOf(c+":",0);return-1!=g?(c=f.indexOf(":",g),g=f.indexOf(";",g),-1!=g?svgtk.setStyle(b,f.substring(0,c+1)+d+f.substring(g,f.length)):svgtk.setStyle(b,f.substring(0,c+
1)+d+";")):svgtk.setA(b,"style",c+":"+d+";"+f)}return svgtk.setA(b,"style",c+":"+d+";")},removeStyleProperty:function(b,c){b.style.removeProperty(c);return b},getStyleAttribute:function(b,c){var d=null;b.hasAttribute(c)&&(d=svgtk.getA(b,c));null==d&&(d=svgtk.getStylePropertyValue(b,c));return d},getStylePropertyValue:function(b,c){var d=b.style.getPropertyValue(c);return null!=d&&0!=d.length?d:null},setStyleAttribute:function(b,c,d){if(b.hasAttribute(c))return b.style.removeProperty(c),svgtk.setA(b,
c,d);b.style.setProperty(c,d,null);return b},getStyleMemberAttribute:function(b,c){var d=null;b.hasAttribute(c)&&(d=svgtk.getA(b,c));null==d&&(d=svgtk.getStyleMember(b,c));return d},setStyleMemberAttribute:function(b,c,d){return b.hasAttribute(c)?(b.style.removeProperty(c),svgtk.setA(b,c,d)):svgtk.setStyleMember(b,c,d)},setStyleProperty:function(b,c,d){b.hasAttribute(c)&&svgtk.removeA(b,c);b.style.setProperty(c,d,null);return b},removeStyleAttribute:function(b,c){b.style.removeProperty(c);b.hasAttribute(c)&&
svgtk.removeA(b,c);return b},setVisibility:function(b,c){return svgtk.setStyleProperty(b,"visibility",c)},checkDashValue:function(b){return RegExp("^[0-9]+( .[0-9]*)?(em|ex|px|in|cm|mm|pt|pc|%)?(,[0-9]+( .[0-9]*)?(em|ex|px|in|cm|mm|pt|pc|%)?)*$","g").test(b)},checkLengthValue:function(b){return RegExp("^[0-9]+( .[0-9]*)?(em|ex|px|in|cm|mm|pt|pc|%)?$","g").test(b)},checkPositiveFloatValue:function(b){return/^\s*(\+)?((\d+(\.\d+)?)|(\.\d+))\s*$/.test(b)},checkFloatValue:function(b){return/^\s*(\+|-)?((\d+(\.\d+)?)|(\.\d+))\s*$/.test(b)},
getPathSegList:function(b){return"undefined"!=typeof b.pathSegList?b.pathSegList:"function"==typeof b.thePathSegList?b.thePathSegList():"function"==typeof window.createPathSegList?window.createPathSegList(b):b.pathSegList},createSVGPathSegArcAbs:function(b,c,d,f,g,h,k,l){return"undefined"!=typeof b.createSVGPathSegArcAbs?b.createSVGPathSegArcAbs(c,d,f,g,h,k,l):"function"==typeof window.createSVGPathSegArcAbs?window.createSVGPathSegArcAbs(c,d,f,g,h,k,l):b.createSVGPathSegArcAbs(c,d,f,g,h,k,l)},createSVGPathSegArcRel:function(b,
c,d,f,g,h,k,l){return"undefined"==typeof b.createSVGPathSegArcRel&&"function"==typeof window.createSVGPathSegArcRel?window.createSVGPathSegArcRel(c,d,f,g,h,k,l):b.createSVGPathSegArcRel(c,d,f,g,h,k,l)},createSVGPathSegClosePath:function(){return"undefined"!=typeof e.createSVGPathSegClosePath?e.createSVGPathSegClosePath():"function"==typeof window.createSVGPathSegClosePath?window.createSVGPathSegClosePath():e.createSVGPathSegClosePath()},createSVGPathSegCurvetoCubicAbs:function(b,c,d,f,g,h,k){return"undefined"!=
typeof b.createSVGPathSegCurvetoCubicAbs?b.createSVGPathSegCurvetoCubicAbs(c,d,f,g,h,k):"function"==typeof window.createSVGPathSegCurvetoCubicAbs?window.createSVGPathSegCurvetoCubicAbs(c,d,f,g,h,k):b.createSVGPathSegCurvetoCubicAbs(c,d,f,g,h,k)},createSVGPathSegCurvetoCubicRel:function(b,c,d,f,g,h,k){return"undefined"!=typeof b.createSVGPathSegCurvetoCubicRel?b.createSVGPathSegCurvetoCubicRel(c,d,f,g,h,k):"function"==typeof window.createSVGPathSegCurvetoCubicRel?window.createSVGPathSegCurvetoCubicRel(c,
d,f,g,h,k):b.createSVGPathSegCurvetoCubicRel(c,d,f,g,h,k)},createSVGPathSegCurvetoCubicSmoothAbs:function(b,c,d,f,g){return"undefined"!=typeof b.createSVGPathSegCurvetoCubicSmoothAbs?b.createSVGPathSegCurvetoCubicSmoothAbs(c,d,f,g):"function"==typeof window.createSVGPathSegCurvetoCubicSmoothAbs?window.createSVGPathSegCurvetoCubicSmoothAbs(c,d,f,g):b.createSVGPathSegCurvetoCubicSmoothAbs(c,d,f,g)},createSVGPathSegCurvetoCubicSmoothRel:function(b,c,d,f,g){return"undefined"!=typeof b.createSVGPathSegCurvetoCubicSmoothRel?
b.createSVGPathSegCurvetoCubicSmoothRel(c,d,f,g):"function"==typeof window.createSVGPathSegCurvetoCubicSmoothRel?window.createSVGPathSegCurvetoCubicSmoothRel(c,d,f,g):b.createSVGPathSegCurvetoCubicSmoothRel(c,d,f,g)},createSVGPathSegCurvetoQuadraticAbs:function(b,c,d,f,g){return"undefined"!=typeof b.createSVGPathSegCurvetoQuadraticAbs?b.createSVGPathSegCurvetoQuadraticAbs(c,d,f,g):"function"==typeof window.createSVGPathSegCurvetoQuadraticAbs?window.createSVGPathSegCurvetoQuadraticAbs(c,d,f,g):b.createSVGPathSegCurvetoQuadraticAbs(c,
d,f,g)},createSVGPathSegCurvetoQuadraticRel:function(b,c,d,f,g){return"undefined"!=typeof b.createSVGPathSegCurvetoQuadraticRel?b.createSVGPathSegCurvetoQuadraticRel(c,d,f,g):"function"==typeof window.createSVGPathSegCurvetoQuadraticRel?window.createSVGPathSegCurvetoQuadraticRel(c,d,f,g):b.createSVGPathSegCurvetoQuadraticRel(c,d,f,g)},createSVGPathSegCurvetoQuadraticSmoothAbs:function(b,c,d){return"undefined"!=typeof b.createSVGPathSegCurvetoQuadraticSmoothAbs?b.createSVGPathSegCurvetoQuadraticSmoothAbs(c,
d):"function"==typeof window.createSVGPathSegCurvetoQuadraticSmoothAbs?window.createSVGPathSegCurvetoQuadraticSmoothAbs(c,d):b.createSVGPathSegCurvetoQuadraticSmoothAbs(c,d)},createSVGPathSegCurvetoQuadraticSmoothRel:function(b,c,d){return"undefined"!=typeof b.createSVGPathSegCurvetoQuadraticSmoothRel?b.createSVGPathSegCurvetoQuadraticSmoothRel(c,d):"function"==typeof window.createSVGPathSegCurvetoQuadraticSmoothRel?window.createSVGPathSegCurvetoQuadraticSmoothRel(c,d):b.createSVGPathSegCurvetoQuadraticSmoothRel(c,
d)},createSVGPathSegLinetoAbs:function(b,c,d){return"undefined"!=typeof b.createSVGPathSegLinetoAbs?b.createSVGPathSegLinetoAbs(c,d):"function"==typeof window.createSVGPathSegLinetoAbs?window.createSVGPathSegLinetoAbs(c,d):b.createSVGPathSegLinetoAbs(c,d)},createSVGPathSegLinetoRel:function(b,c,d){return"undefined"!=typeof b.createSVGPathSegLinetoRel?b.createSVGPathSegLinetoRel(c,d):"function"==typeof window.createSVGPathSegLinetoRel?window.createSVGPathSegLinetoRel(c,d):b.createSVGPathSegLinetoRel(c,
d)},createSVGPathSegLinetoHorizontalAbs:function(b,c){return"undefined"!=typeof b.createSVGPathSegLinetoHorizontalAbs?b.createSVGPathSegLinetoHorizontalAbs(c):"function"==typeof window.createSVGPathSegLinetoHorizontalAbs?window.createSVGPathSegLinetoHorizontalAbs(c):b.createSVGPathSegLinetoHorizontalAbs(c)},createSVGPathSegLinetoHorizontalRel:function(b,c){return"undefined"!=typeof b.createSVGPathSegLinetoHorizontalRel?b.createSVGPathSegLinetoHorizontalRel(c):"function"==typeof window.createSVGPathSegLinetoHorizontalRel?
window.createSVGPathSegLinetoHorizontalRel(c):b.createSVGPathSegLinetoHorizontalRel(c)},createSVGPathSegLinetoVerticalAbs:function(b,c){return"undefined"!=typeof b.createSVGPathSegLinetoVerticalAbs?b.createSVGPathSegLinetoVerticalAbs(c):"function"==typeof window.createSVGPathSegLinetoVerticalAbs?window.createSVGPathSegLinetoVerticalAbs(c):b.createSVGPathSegLinetoVerticalAbs(c)},createSVGPathSegLinetoVerticalRel:function(b,c){return"undefined"!=typeof b.createSVGPathSegLinetoVerticalRel?b.createSVGPathSegLinetoVerticalRel(c):
"function"==typeof window.createSVGPathSegLinetoVerticalRel?window.createSVGPathSegLinetoVerticalRel(c):b.createSVGPathSegLinetoVerticalRel(c)},createSVGPathSegMovetoAbs:function(b,c,d){return"undefined"!=typeof b.createSVGPathSegMovetoAbs?b.createSVGPathSegMovetoAbs(c,d):"function"==typeof window.createSVGPathSegMovetoAbs?window.createSVGPathSegMovetoAbs(c,d):b.createSVGPathSegMovetoAbs(c,d)},createSVGPathSegMovetoRel:function(b,c,d){return"undefined"!=typeof b.createSVGPathSegMovetoRel?b.createSVGPathSegMovetoRel(c,
d):"function"==typeof window.createSVGPathSegMovetoRel?window.createSVGPathSegMovetoRel(c,d):b.createSVGPathSegMovetoRel(c,d)},array:{}};svgtk.array.contains=function(b,c){for(var d=0;d<b.length;d++)if(b[d]==c)return!0;return!1};svgtk.array.removeItem=function(b,c){for(var d=0;d<b.length;d++)if(b[d]==c)return b.splice(d,1),!0;return!1};svgtk.colorRgb2Hex=function(b,c,d){b=svgtk.dec2hex((b<<16)+(c<<8)+d);c="";for(d=b.length;6>d;d++)c="0"+c;return"#"+c+b};
svgtk.dec2hex=function(b){for(var c="";15<b;)c="0123456789ABCDEF".charAt(b-16*Math.floor(b/16))+c,b=Math.floor(b/16);return c="0123456789ABCDEF".charAt(b)+c};svgtk.isNamedColor=function(b){return svgtk.colors[b]?!0:!1};svgtk.isHexColor=function(b){return null!=b&&"#"==b.charAt(0)&&7==b.length};svgtk.isRgbColor=function(b){return null!=b&&0==b.indexOf("rgb(")?(b=/(.*?)rgb\([ ]*(\d+)[ ]*,[ ]*(\d+)[ ]*,[ ]*(\d+)[ ]*\)/.exec(b),null!=b&&5==b.length):!1};
svgtk.parseRgbColor=function(b){b=/(.*?)rgb\([ ]*(\d+)[ ]*,[ ]*(\d+)[ ]*,[ ]*(\d+)[ ]*\)/.exec(b);return{r:parseInt(b[2],10),g:parseInt(b[3],10),b:parseInt(b[4],10)}};svgtk.colorHexToR=function(b){return parseInt(svgtk.cutHex(b).substring(0,2),16)};svgtk.colorHexToG=function(b){return parseInt(svgtk.cutHex(b).substring(2,4),16)};svgtk.colorHexToB=function(b){return parseInt(svgtk.cutHex(b).substring(4,6),16)};svgtk.cutHex=function(b){return"#"==b.charAt(0)?b.substring(1,7):b};
svgtk.colorHsv2Hex=function(b,c,d){b=svgtk.hsv2rgb(b,c,d);return svgtk.colorRgb2Hex(b.r,b.g,b.b)};
svgtk.hsv2rgb=function(b,c,d){var f={r:0,g:0,g:0};if(0==c)f.r=Math.round(255*d),f.g=Math.round(255*d),f.b=Math.round(255*d);else{var g=b/60;b=Math.floor(g);var h=g-b;0==b%2&&(h=1-h);g=d*(1-c);c=d*(1-c*h);switch(b){case 0:f.r=d;f.g=c;f.b=g;break;case 1:f.r=c;f.g=d;f.b=g;break;case 2:f.r=g;f.g=d;f.b=c;break;case 3:f.r=g;f.g=c;f.b=d;break;case 4:f.r=c;f.g=g;f.b=d;break;case 5:f.r=d;f.g=g;f.b=c;break;case 6:f.r=d,f.g=c,f.b=g}f.r=Math.round(255*f.r);f.g=Math.round(255*f.g);f.b=Math.round(255*f.b)}return f};
svgtk.rgb2hsv=function(b,c,d){b/=255;c/=255;d/=255;var f=Math.min(b,Math.min(c,d)),g=Math.max(b,Math.max(c,d));return f==g?{h:0,s:0,v:f}:{h:60*((b==f?3:d==f?1:5)-(b==f?c-d:d==f?b-c:d-b)/(g-f)),s:(g-f)/g,v:g}};
svgtk.colors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};svgtk.addListener=function(b,c,d){b.addEventListener(c,d,!1);return b};
svgtk.removeListener=function(b,c,d){b.removeEventListener(c,d,!1);return b};svgtk.addMouseWheelListener=function(b,c){var d=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";return svgtk.addListener(b,d,c)};svgtk.stopEvent=function(b){b.stopPropagation();b.preventDefault()};svgtk.testAgentFireFox=/Firefox/i.test(navigator.userAgent);svgtk.removeMouseWheelListener=function(b,c){return svgtk.removeListener(b,svgtk.testAgentFireFox?"DOMMouseScroll":"mousewheel",c)};
svgtk.getMouseWheelEventDelta=function(b){return Math.max(-1,Math.min(1,b.wheelDelta||-b.detail))};svgtk.isTouchSupported="ontouchstart"in window;
svgtk.touchAdaptHandlers=function(b){for(var c=0,d=b.firstChild;null!=d;d=d.nextSibling)d.tagName&&!d.hasAttribute("ontouchstart")&&(d.hasAttribute("onclick")?(svgtk.removeA(svgtk.setA(d,"ontouchstart",svgtk.getA(d,"onclick"),"onclick")),c++):d.hasAttribute("onmousedown")&&(svgtk.removeA(svgtk.setA(d,"ontouchstart",svgtk.getA(d,"onmousedown"),"onmousedown")),c++));for(d=b.firstChild;null!=d;d=d.nextSibling)d.tagName&&(c+=svgtk.touchAdaptHandlers(d));return c};
svgtk.numberFixDigit=function(b,c){var d=Math.pow(10,c);return(Math.round(b*d)/d).toFixed(c)};svgtk.checkTypeOfMember=function(b,c){try{return"undefined"!=typeof b[c]}catch(d){return!1}};svgtk.callWindowParentFunction=function(b){if(svgtk.checkTypeOfMember(window.parent,b))window.parent[b]();else if(svgtk.checkTypeOfMember(window,b))window[b]()};svgtk.callWindowParentFunction1=function(b,c){if(svgtk.checkTypeOfMember(window.parent,b))window.parent[b](c);else if(svgtk.checkTypeOfMember(window,b))window[b](c)};
svgtk.callWindowParentFunction2=function(b,c,d){if(svgtk.checkTypeOfMember(window.parent,b))window.parent[b](c,d);else if(svgtk.checkTypeOfMember(window,b))window[b](c,d)};svgtk.hypot=function(b,c){return Math.sqrt(b*c+c*c)};svgtk.messages={en:{},fr:{}};svgtk.local="en";
var SVGPreserveAspectRatio={SVG_PRESERVEASPECTRATIO_UNKNOWN:0,SVG_PRESERVEASPECTRATIO_NONE:1,SVG_PRESERVEASPECTRATIO_XMINYMIN:2,SVG_PRESERVEASPECTRATIO_XMIDYMIN:3,SVG_PRESERVEASPECTRATIO_XMAXYMIN:4,SVG_PRESERVEASPECTRATIO_XMINYMID:5,SVG_PRESERVEASPECTRATIO_XMIDYMID:6,SVG_PRESERVEASPECTRATIO_XMAXYMID:7,SVG_PRESERVEASPECTRATIO_XMINYMAX:8,SVG_PRESERVEASPECTRATIO_XMIDYMAX:9,SVG_PRESERVEASPECTRATIO_XMAXYMAX:10,SVG_MEETORSLICE_UNKNOWN:0,SVG_MEETORSLICE_MEET:1,SVG_MEETORSLICE_SLICE:2};var svggeo={};svggeo.Axis=function(){this.vx=this.uy=this.x1=this.y1=this.y2=0;this.ux=this.x2=1;this.vy=-1};svggeo.Axis.prototype.init=function(b,c,d,f){this.x1=b;this.y1=c;this.x2=d;this.y2=f;return this.normalize()};svggeo.Axis.prototype.normalize=function(){var b=this.x2-this.x1,c=this.y2-this.y1,d=svgtk.hypot(b,c);1E-10<=d?(this.ux=b/d,this.uy=c/d):(this.ux=1,this.uy=0);this.vx=this.uy;this.vy=-this.ux;return this};svggeo.Axis.prototype.setP2=function(b,c){this.x2=b;this.y2=c;return this.normalize()};
svggeo.Axis.prototype.setP1=function(b,c){this.x1=b;this.y1=c;return this.normalize()};svggeo.Axis.prototype.signedDistanceFromAxisToPoint=function(b,c){return(b-this.x1)*this.vx+(c-this.y1)*this.vy};svggeo.Axis.prototype.signedDistanceFromOriginToPointAlongAxis=function(b,c){return(b-this.x1)*this.ux+(c-this.y1)*this.uy};svggeo.Axis.prototype.signedDistanceFromExtremityToPointAlongAxis=function(b,c){return(b-this.x2)*this.ux+(c-this.y2)*this.uy};
svggeo.Axis.prototype.xFromExtremityAlongAxis=function(b){return this.x2+this.ux*b};svggeo.Axis.prototype.yFromExtremityAlongAxis=function(b){return this.y2+this.uy*b};svggeo.Axis.prototype.angleFromOriginToPointWithAxis=function(b,c){var d=this.signedDistanceFromOriginToPointAlongAxis(b,c),f=this.signedDistanceFromAxisToPoint(b,c),g=Math.sqrt(d*d+f*f),h=0;1E-9<g&&(h=180*Math.acos(d/g)/Math.PI);return 0<f?-h:h};var svgctrl={};svgctrl.MovingCtrl=function(){this.digit=1;this.touch=!1;this.enabled=!0;this.movingCB=this.moving.bind(this);this.downCB=this.downTarget=this.upCB=null;this.onMovingCB=this.onMoving.bind(this);this.onBarUpCB=this.onBarUp.bind(this);this.onTouchMoveCB=this.onTouchMove.bind(this);this.onTouchStartMovingCB=this.onTouchStartMoving.bind(this);this.onStartMovingCB=this.onStartMoving.bind(this);this.root=null};svgctrl.MovingCtrl.prototype.init=function(b){this.g=b;this.root=svgtk.getRoot(b);return this};
svgctrl.MovingCtrl.prototype.initTarget=function(b,c,d,f){this.g=b;this.root=svgtk.getRoot(b);this.movingCB=d;this.upCB=f;return this.setDownTarget(b,c)};svgctrl.MovingCtrl.prototype.setMovingCB=function(b){this.movingCB=b;return this};
svgctrl.MovingCtrl.prototype.setDownTarget=function(b,c){null!=this.downTarget&&(1==svgtk.isTouchSupported?svgtk.removeListener(this.downTarget,"touchstart",this.onTouchStartMovingCB):svgtk.removeListener(this.downTarget,"mousedown",this.onStartMovingCB));this.downTarget=b;this.downCB=c;1==svgtk.isTouchSupported?svgtk.addListener(b,"touchstart",this.onTouchStartMovingCB):svgtk.addListener(b,"mousedown",this.onStartMovingCB);return this};
svgctrl.MovingCtrl.prototype.setUpCB=function(b){this.upCB=b;return this};
svgctrl.MovingCtrl.prototype.initMoving=function(b,c,d,f){this.fw2svg=svgtk.getPix2SvgScale(this.g);this.digit=0;for(var g=1;g>this.fw2svg;g/=10)this.digit+=1;this.ex=c;this.ey=d;this.touch=f;null!=this.downCB&&this.downCB(b,c,d);1==f?svgtk.addListener(svgtk.addListener(svgtk.addListener(this.root,"touchmove",this.onTouchMoveCB),"touchend",this.onBarUpCB),"touchcancel",this.onBarUpCB):svgtk.addListener(svgtk.addListener(this.root,"mousemove",this.onMovingCB),"mouseup",this.onBarUpCB)};
svgctrl.MovingCtrl.prototype.onStartMoving=function(b){try{b.preventDefault(),this.enabled&&this.initMoving(b,b.clientX,b.clientY,!1)}catch(c){alert("svgctrl.MovingCtrl.onStartMoving "+c)}};svgctrl.MovingCtrl.prototype.moving=function(b,c){svgtk.translateElement(this.g,b,c)};svgctrl.MovingCtrl.prototype.movingXy=function(b,c){var d=(b-this.ex)*this.fw2svg,f=(c-this.ey)*this.fw2svg;this.ex=b;this.ey=c;this.movingCB(d,f,b,c)};
svgctrl.MovingCtrl.prototype.onMoving=function(b){try{this.movingXy(b.clientX,b.clientY)}catch(c){this.stop(),alert("svgctrl.MovingCtrl.onMoving "+c)}};svgctrl.MovingCtrl.prototype.onBarUp=function(b){this.stop();null!=this.upCB&&this.upCB(b)};
svgctrl.MovingCtrl.prototype.stop=function(){1==this.touch?svgtk.removeListener(svgtk.removeListener(svgtk.removeListener(this.root,"touchmove",this.onTouchMoveCB),"touchend",this.onBarUpCB),"touchcancel",this.onBarUpCB):svgtk.removeListener(svgtk.removeListener(this.root,"mousemove",this.onMovingCB),"mouseup",this.onBarUpCB)};svgctrl.MovingCtrl.prototype.setEnabled=function(b){this.enabled=b};
svgctrl.MovingCtrl.prototype.onTouchStartMoving=function(b){try{if(b.preventDefault(),this.enabled){var c=b.touches.item(0);this.initMoving(b,c.clientX,c.clientY,!0)}}catch(d){alert("svgctrl.MovingCtrl.onTouchStartMoving "+d)}};svgctrl.MovingCtrl.prototype.onTouchMove=function(b){try{b.preventDefault();var c=b.touches.item(0);this.movingXy(c.clientX,c.clientY)}catch(d){this.stop()}};svgctrl.NumberLabel=function(){};svgctrl.NumberLabel.prototype.text=null;svgctrl.NumberLabel.prototype.value=0;svgctrl.NumberLabel.prototype.visibleDigitCount=1;svgctrl.NumberLabel.prototype.init=function(b){this.text=b;this.value=parseFloat(svgtk.getTextData(this.text));return this};svgctrl.NumberLabel.prototype.initById=function(b){this.init(svgtk.get(b));return this};svgctrl.NumberLabel.prototype.setDigit=function(b){this.visibleDigitCount=b;return this};
svgctrl.NumberLabel.prototype.setDigitWithInterval=function(b,c,d){return this.setDigitWithResolution((c-b)/intervallCount)};svgctrl.NumberLabel.prototype.setDigitWithResolution=function(b){var c=1;for(this.visibleDigitCount=0;c>b;)c/=10,this.visibleDigitCount++;return this};svgctrl.NumberLabel.prototype.fixDigit=function(b){return 0>=this.visibleDigitCount?parseInt(b):svgtk.numberFixDigit(b,this.visibleDigitCount)};
svgctrl.NumberLabel.prototype.setValue=function(b){this.value=parseFloat(b);svgtk.setTextData(this.text,this.fixDigit(b));return this};svgctrl.NumberLabel.prototype.getValue=function(){return this.value};svgctrl.Slider=function(){this.mrc=new svgctrl.MovingCtrl;this.onIndexMoveCB=this.onIndexMove.bind(this);this.onIndexUpCB=this.onIndexUp.bind(this);this.onMoveCtrlCB=this.onMoveCtrl.bind(this);this.mrc.setMovingCB(this.onMoveCtrlCB);this.mrc.setUpCB(this.onIndexUpCB);this.downCB=null};svgctrl.Slider.prototype.enabled=!0;svgctrl.Slider.prototype.hz=!0;
svgctrl.Slider.prototype.initByName=function(b,c,d,f,g,h,k,l){this.init(svgtk.get(b+"-bar"),svgtk.get(b+"-index"),svgtk.get(b+"-value"),c,d,f,g,h,k,l);return this};svgctrl.Slider.prototype.initHzByName=function(b,c,d,f,g,h,k){this.init(svgtk.get(b+"-bar"),svgtk.get(b+"-index"),svgtk.get(b+"-value"),!0,c,d,f,h,k,!0);this.downCB=g;return this};
svgctrl.Slider.prototype.init=function(b,c,d,f,g,h,k,l,m,n){this.mrc.init(c);this.bar=b;this.index=c;this.valueText=new svgctrl.NumberLabel;this.valueText.init(d);this.value=d;this.cbMove=l;this.cbUp=m;this.hz=f;this.len=1==this.hz?this.bar.getBBox().width:this.bar.getBBox().height;this.inside=!0;this.setInterval(g,h,k);this.setValue(this.v1);1==n&&this.mrc.setDownTarget(c,this.initMoving.bind(this));return this};
svgctrl.Slider.prototype.setInterval=function(b,c,d){this.v1=parseFloat(b);this.v2=parseFloat(c);this.vmin=Math.min(this.v1,this.v2);this.vmax=Math.max(this.v1,this.v2);this.digit=d;this.valueText.setDigit(d);return this};svgctrl.Slider.prototype.setEnabled=function(b){b!=this.enabled&&(this.enabled=b,1==b?(this.inside&&svgtk.show(this.index),svgtk.show(this.value)):(svgtk.hide(this.index),svgtk.hide(this.value)));return this};
svgctrl.Slider.prototype.setInside=function(b){b?svgtk.show(this.index):svgtk.hide(this.index);svgtk.show(this.value);this.inside=b;return this};
svgctrl.Slider.prototype.setValue=function(b){this.enabled||this.setEnabled(!0);if(b>=this.vmin&&b<=this.vmax){var c=this.len*(b-this.v1)/(this.v2-this.v1);this.inside||svgtk.show(this.index);svgtk.setTransform(this.index,1==this.hz?"translate("+c+" 0)":"translate(0 "+c+")");0==this.inside&&svgtk.show(this.value);this.inside=!0}else this.inside=!1,svgtk.hide(this.index);this.valueText.setValue(b);return this};svgctrl.Slider.prototype.getValue=function(){return this.valueText.getValue()};
svgctrl.Slider.prototype.onIndexDown0=function(b){try{if(b.preventDefault(),this.enabled){var c=svgtk.getRoot(this.bar);this.fw2svg=svgtk.getPix2SvgScale(this.bar);this.mvC0=1==this.hz?b.clientX:b.clientY;this.mvOo=parseFloat(this.getValue());svgtk.addListener(svgtk.addListener(c,"mousemove",this.onIndexMoveCB),"mouseup",this.onIndexUpCB)}}catch(d){alert("Slider onIndexDown:"+d+" "+a)}};
svgctrl.Slider.prototype.initMoving=function(b,c,d){this.fw2svg=svgtk.getPix2SvgScale(this.bar);this.mvC0=1==this.hz?c:d;this.scale=this.fw2svg/this.len*(this.v2-this.v1);this.mvOo=parseFloat(this.getValue());null!=this.downCB&&this.downCB(b,c,d)};svgctrl.Slider.prototype.onIndexDown=function(b){this.initMoving(b,b.clientX,b.clientY);this.mrc.onStartMoving(b)};
svgctrl.Slider.prototype.onMoveCtrl=function(b,c,d,f){b=Math.max(this.vmin,Math.min(this.vmax,this.mvOo+((1==this.hz?d:f)-this.mvC0)*this.scale));b=this.fixDigit(b);null!=this.cbMove?this.cbMove(b):this.setValue(b)};svgctrl.Slider.prototype.fixDigit=function(b){return 0>=this.digit?parseInt(b):svgtk.numberFixDigit(parseFloat(b),this.digit)};
svgctrl.Slider.prototype.onIndexMove=function(b){try{var c=Math.max(this.vmin,Math.min(this.vmax,this.mvOo+((1==this.hz?b.clientX:b.clientY)-this.mvC0)*this.fw2svg/this.len*(this.v2-this.v1))),d=this.fixDigit(c);null!=this.cbMove?this.cbMove(d):this.setValue(d)}catch(f){b=svgtk.getRoot(this.bar),svgtk.removeListener(svgtk.removeListener(b,"mousemove",this.onIndexMoveCB),"mouseup",this.onIndexUpCB),alert("Slider onIndexMove:"+f)}};
svgctrl.Slider.prototype.onIndexUp0=function(b){try{var c=svgtk.getRoot(this.bar);svgtk.removeListener(svgtk.removeListener(c,"mousemove",this.onIndexMoveCB),"mouseup",this.onIndexUpCB);null!=this.cbUp&&this.cbUp(this.getValue())}catch(d){alert("Slider onIndexUp:"+d)}};svgctrl.Slider.prototype.onIndexUp=function(b){try{null!=this.cbUp&&this.cbUp(this.getValue())}catch(c){alert("Slider onIndexUp:"+c)}};svgctrl.RotateHandler=function(){this.axis=new svggeo.Axis;this.mc=new svgctrl.MovingCtrl;this.initMovingCB=this.initMoving.bind(this);this.movingCB=this.moving.bind(this);this.upCB=this.up.bind(this);this.onDownCB=null};svgctrl.RotateHandler.prototype.initTarget=function(b,c,d,f,g,h){this.axis.init(c,d,c-1E3,d);this.mc.initTarget(b,this.initMovingCB,this.movingCB,this.upCB);this.onDownCB=f;this.onRotateMoveCB=g;this.onRotateUpCB=h;return this};
svgctrl.RotateHandler.prototype.initMoving=function(b,c,d){this.root=svgtk.getRoot(b.target);this.m=b.target.getScreenCTM().inverse();this.p2=this.root.createSVGPoint();this.ex=c;this.ey=d;this.p2.x=c;this.p2.y=d;this.p2=this.p2.matrixTransform(this.m);this.axis.setP2(this.p2.x,this.p2.y);if(null!=this.onDownCB)this.onDownCB(b,c,d)};
svgctrl.RotateHandler.prototype.moving=function(b,c,d,f){if(d!=this.ex||f!=this.ey)this.p2.x=d,this.p2.y=f,this.p2=this.p2.matrixTransform(this.m),b=this.axis.angleFromOriginToPointWithAxis(this.p2.x,this.p2.y),this.axis.setP2(this.p2.x,this.p2.y),this.ex=d,this.ey=f,this.onRotateMoveCB(b)};svgctrl.RotateHandler.prototype.up=function(b){if(null!=this.onRotateUpCB)this.onRotateUpCB(b)};svgctrl.TextEdit=function(){this.onKeypressCB=this.onKeypress.bind(this);this.onKeydownCB=this.onKeydown.bind(this);this.enabled=!0;this.focused=!1;this.resetOnClick=!0;this.autoSizeRectFlag=!1;this.rectMargin=0;this.autoSizeMinLengthValue="ABCDEFG";this.scrollable=!1;this.pValue=null};
svgctrl.TextEdit.prototype.init=function(b,c){var d=svgtk.getId(b);this.text=b;this.rect=svgtk.find(d+"-rect");null==this.rect&&(this.rect=svgtk.findNextSibling(this.text,"rect"));null==this.rect&&(this.rect=svgtk.getPreviousSibling(this.text,"rect"));this.cb=c;0==this.text.childNodes.length&&this.text.appendChild(this.text.ownerDocument.createTextNode(""));this.onKeypressCB=this.onKeypress.bind(this);this.onKeydownCB=this.onKeydown.bind(this);this.index=svgtk.find(d+"-index");this.matrix=svgtk.getRoot(b).createSVGMatrix();
this.gscroll=svgtk.find(d+"-scroll");null!=this.index&&(svgtk.hide(this.index),this.resetOnClick=!1);return this};svgctrl.TextEdit.prototype.setEnabled=function(b){this.enabled=b;return this};svgctrl.TextEdit.prototype.isEnabled=function(){return this.enabled};svgctrl.TextEdit.prototype.setArrowUpCB=function(b){this.arrowUpCB=b;return this};svgctrl.TextEdit.prototype.setArrowUpField=function(b){this.arrowUpField=b;return this};
svgctrl.TextEdit.prototype.setArrowDownCB=function(b){this.arrowDownCB=b;return this};svgctrl.TextEdit.prototype.setArrowDownField=function(b){this.arrowDownField=b;null!=b&&(b.arrowUpField=this);return this};svgctrl.TextEdit.prototype.setAutoSizeRect=function(b,c,d){this.autoSizeRectFlag=b;1==b&&(this.autoSizeMinLengthValue=c,this.rectMargin=d,this.autoSizeRect());return this};
svgctrl.TextEdit.prototype.autoSizeRect=function(){this.getValue().length<this.autoSizeMinLengthValue.length?this.setMaxRect(this.autoSizeMinLengthValue,this.rectMargin):this.setRect(this.rectMargin);return this};svgctrl.TextEdit.prototype.setRectMargin=function(b){this.rectMargin=b;this.autoSizeRectFlag&&this.autoSizeRect();return this};
svgctrl.TextEdit.prototype.setMaxRect=function(b,c){var d,f=svgtk.getTextData(this.text);svgtk.setTextData(this.text,b);d=this.text.getBBox();svgtk.setTextData(this.text,f);this.rectMargin=c;svgtk.setRect(this.rect,d,this.rectMargin);return d};svgctrl.TextEdit.prototype.setRect=function(b){var c=this.text.getBBox();this.rectMargin=b;svgtk.setRect(this.rect,c,this.rectMargin);return c};svgctrl.TextEdit.prototype.getValue=function(){return svgtk.getTextData(this.text)};
svgctrl.TextEdit.prototype.setValue=function(b){svgtk.setTextData(this.text,b);1==this.autoSizeRectFlag&&this.autoSizeRect();return this};svgctrl.TextEdit.prototype.setResetOnClick=function(b){this.resetOnClick=b;return this};
svgctrl.TextEdit.prototype.onclick=function(b){b.preventDefault();if(this.enabled)return null!=svgctrl.TextEdit.focusOwner&&svgctrl.TextEdit.focusOwner.validate(),this.addListeners(),this.focused=!0,this.pValue=svgtk.getTextData(this.text),svgtk.setClassSuffix(this.rect,"2"),this.rectBox=this.rect.getBBox(),this.indexPos=-1,1==this.resetOnClick&&svgtk.setTextData(this.text,""),this.numberOfChars=this.text.getNumberOfChars(),null!=this.index&&(this.indexPos=this.numberOfChars,0!=this.numberOfChars?
svgtk.setTransformMatrix(this.index,this.matrix.translate(this.text.getEndPositionOfChar(this.numberOfChars-1).x,0)):svgtk.setTransformMatrix(this.index,this.matrix.translate(0,0)),svgtk.show(this.index),null!=this.gscroll&&svgtk.setTransformMatrix(this.gscroll,this.matrix.translate(0,0))),this.ensureVisible(),!0;throw"field is disabled";};
svgctrl.TextEdit.prototype.addListeners=function(){window.focus();svgtk.addListener(svgtk.addListener(document.documentElement,"keypress",this.onKeypressCB),"keydown",this.onKeydownCB);this.focused=!0;svgctrl.TextEdit.focusOwner=this};
svgctrl.TextEdit.prototype.removeListeners=function(){svgtk.removeListener(svgtk.removeListener(document.documentElement,"keypress",this.onKeypressCB),"keydown",this.onKeydownCB);svgtk.setClassSuffix(this.rect,"0");this.focused=!1;null!=this.index&&svgtk.hide(this.index);svgctrl.TextEdit.focusOwner=null};
svgctrl.TextEdit.prototype.onKeydown=function(b){var c=b.charCode|b.keyCode;if(8==c)b.preventDefault(),c=this.numberOfChars,0<c&&(-1==this.indexPos?(this.text.firstChild.deleteData(c-1,1),this.numberOfChars--):0<this.indexPos&&(this.indexPos==this.numberOfChars?svgtk.setTransformMatrix(this.index,this.matrix.translate(this.text.getStartPositionOfChar(this.numberOfChars-1).x,0)):svgtk.setTransformMatrix(this.index,this.matrix.translate(this.text.getStartPositionOfChar(this.indexPos-1).x,0)),this.text.firstChild.deleteData(this.indexPos-
1,1),this.indexPos=Math.max(0,this.indexPos-1),this.numberOfChars--),1==this.autoSizeRectFlag&&c>this.autoSizeMinLengthValue.length&&this.setRect(this.rectMargin),this.ensureVisible()),b.returnValue=!1;else if(37<=c&&40>=c)switch(c){case 37:null!=this.index&&0<this.numberOfChars&&(-1==this.indexPos?this.indexPos=this.numberOfChars-1:0<this.indexPos&&this.indexPos--,svgtk.setTransformMatrix(this.index,this.matrix.translate(this.text.getStartPositionOfChar(this.indexPos).x,0)),this.ensureVisible());
break;case 39:null!=this.index&&(this.indexPos==this.numberOfChars?svgtk.setTransformMatrix(this.index,this.matrix.translate(this.text.getEndPositionOfChar(this.numberOfChars-1).x,0)):this.indexPos==this.numberOfChars-1?(this.indexPos++,svgtk.setTransformMatrix(this.index,this.matrix.translate(this.text.getEndPositionOfChar(this.numberOfChars-1).x,0))):(this.indexPos++,svgtk.setTransformMatrix(this.index,this.matrix.translate(this.text.getStartPositionOfChar(this.indexPos).x,0))),this.ensureVisible());
break;case 38:this.abort();if(this.arrowUpCB)this.arrowUpCB(b);else if(this.arrowUpField)this.arrowUpField.onclick(b);break;case 40:if(this.abort(),this.arrowDownCB)this.arrowDownCB(b);else if(this.arrowDownField)this.arrowDownField.onclick(b)}};svgctrl.TextEdit.prototype.abort=function(){this.focused&&(svgtk.setTextData(this.text,this.pValue),this.removeListeners(),this.pValue=null)};
svgctrl.TextEdit.prototype.validate=function(b){if(this.focused&&(this.removeListeners(),void 0!=this.cb))try{this.setValue(this.cb(b,svgtk.getTextData(this.text),this.pValue))}catch(c){this.setValue(this.pValue)}};
svgctrl.TextEdit.prototype.onKeypress=function(b){var c=b.charCode|b.keyCode;if(13==c||10==c)if(this.validate(b),this.arrowDownCB)this.arrowDownCB(b);else{if(this.arrowDownField)this.arrowDownField.onclick(b)}else 31<c&&127!=c&&65535>c&&(-1==this.indexPos?this.text.firstChild.appendData(String.fromCharCode(c)):this.indexPos==this.numberOfChars?(this.text.firstChild.appendData(String.fromCharCode(c)),this.indexPos++,svgtk.setTransformMatrix(this.index,this.matrix.translate(this.text.getEndPositionOfChar(this.numberOfChars).x,
0))):(this.text.firstChild.insertData(this.indexPos,String.fromCharCode(c)),svgtk.setTransformMatrix(this.index,this.matrix.translate(this.text.getEndPositionOfChar(this.indexPos).x,0)),this.indexPos++),this.numberOfChars++,1==this.autoSizeRectFlag&&svgtk.getTextDataLength(this.text)>this.autoSizeMinLengthValue.length&&this.setRect(this.rectMargin),this.ensureVisible());return b.returnValue=!1};
svgctrl.TextEdit.prototype.ensureVisible=function(){if(null!=this.gscroll&&0!=this.numberOfChars&&-1!=this.indexPos){var b=this.indexPos>=this.numberOfChars?this.numberOfChars-1:this.indexPos,c=this.text.getEndPositionOfChar(b);c.x<this.rectBox.x?(c=this.text.getStartPositionOfChar(b),svgtk.setTransformMatrix(this.gscroll,this.matrix.translate(this.rectBox.x-c.x,0))):c.x>this.rectBox.x+this.rectBox.width?svgtk.setTransformMatrix(this.gscroll,this.matrix.translate(this.rectBox.x+this.rectBox.width-
c.x,0)):svgtk.setTransformMatrix(this.gscroll,this.matrix.translate(0,0))}};svgctrl.TextEdit.focusOwner=null;var grdtrf={init:function(){grdtrf.g=svgtk.get("grdtrfpanel-g");grdtrf.root=svgtk.getRoot(grdtrf.g);grdtrf.rotateAg=svgtk.get("rotate-ag");grdtrf.target=grdtrf.gradient=grdtrf.base=grdtrf.rotate=grdtrf.scale=null;grdtrf.bModified=!1;grdtrf.bEnabled=!1;grdtrf.bCopy=!1;grdtrf.bCustomize=!1;grdtrf.mc=(new svgctrl.MovingCtrl).init(grdtrf.g);grdtrf.rotateTextEdit=(new svgctrl.TextEdit).init(svgtk.get("rotate-value"),grdtrf.onTextEditRotate).setEnabled(!1);grdtrf.scaleTextEdit=(new svgctrl.TextEdit).init(svgtk.get("scale-value"),
grdtrf.onTextEditScale).setEnabled(!1);grdtrf.lnscales=(new svgctrl.Slider).initHzByName("lnscale",1,100,1,grdtrf.onLogScaleDownCB,grdtrf.onLogScaleCB,grdtrf.onLogScaleCB).setEnabled(!1);grdtrf.rotateHdl=(new svgctrl.RotateHandler).initTarget(svgtk.get("rotate-ag-c"),0,0,grdtrf.onRotateDownCB,grdtrf.onRotateMoveCB,grdtrf.onRotateUpCB);svgtk.setElementPreviousRectBox(svgtk.get("transform-title"),1);svgtk.setElementPreviousRectBox(svgtk.get("gradient-title"),1);svgtk.setRect(svgtk.get("gradientTransformApplyRect"),
svgtk.get("gradientTransformApplyText").getBBox(),1);grdtrf.mc.setDownTarget(svgtk.get("grdtrfpanel-bar"),null);svgtk.isTouchSupported&&svgtk.touchAdaptHandlers(grdtrf.root)},clear:function(){grdtrf.target=grdtrf.gradient=grdtrf.base=grdtrf.rotate=grdtrf.scale=null;grdtrf.bModified=!1;grdtrf.bEnabled=!1;grdtrf.bCopy=!1;grdtrf.bCustomize=!1},setTarget:function(b,c){var d=svgtk.getId(c),f=svgtk.getId(b);grdtrf.clear();grdtrf.target=b;grdtrf.setGradient(c);0==d.indexOf(f)?grdtrf.disableCopyCustomize():
(svgtk.setClass(svgtk.get("copyBtnRect"),"btn"),svgtk.setClass(svgtk.get("customizeBtnRect"),null!=grdtrf.base?"btnDisabled":"btn"),grdtrf.bEnabled=!0)},setEnabledFields:function(b){grdtrf.rotateTextEdit.setEnabled(b);grdtrf.scaleTextEdit.setEnabled(b);svgtk.setFill(svgtk.get("rotate-title"),"black");svgtk.setFill(svgtk.get("scale-title"),"black")},showRotateAg:function(){var b=grdtrf.rotateAg.transform.baseVal,c=null==grdtrf.rotate?180:grdtrf.rotate.angle+180;grdtrf.rotateAgTransform=b.initialize(b.createSVGTransformFromMatrix(svgtk.getRoot(grdtrf.gradient).createSVGMatrix().rotate(c)));
grdtrf.setRotateAgAngle(c)},setRotateAgAngle:function(b){for(;0>b;)b+=360;b=Math.min(Math.max(b,180),360);grdtrf.rotateAgTransform.setRotate(b,0,0);return b},loadTransform:function(){grdtrf.loadGradientTransform(grdtrf.gradient,!1)},loadGradientTransform:function(b,c){grdtrf.rotate=grdtrf.scale=null;if(b.hasAttribute("gradientTransform")&&0!=b.gradientTransform.baseVal.numberOfItems){var d=b.gradientTransform.baseVal;svgtk.setFill(svgtk.get("scale-title"),c?"blue":"black");svgtk.setFill(svgtk.get("rotate-title"),
c?"blue":"black");for(var f=0;f<d.numberOfItems;f++)4==d.getItem(f).type?grdtrf.rotate=d.getItem(f):3==d.getItem(f).type&&(grdtrf.scale=d.getItem(f));null!=grdtrf.rotate?grdtrf.rotateTextEdit.setValue(svgtk.numberFixDigit(grdtrf.rotate.angle,2)):grdtrf.rotateTextEdit.setValue("?");grdtrf.showRotateAg();null!=grdtrf.scale?(grdtrf.scaleTextEdit.setValue(svgtk.numberFixDigit(grdtrf.scale.matrix.a,2)),grdtrf.lnscales.setValue(Math.pow(10,grdtrf.scale.matrix.a)).setEnabled(!0)):(grdtrf.scaleTextEdit.setValue("?"),
grdtrf.lnscales.setValue(1E3));grdtrf.baseTransform=c;grdtrf.gradientTransform=b}else d=grdtrf.getBase(b),null!=d?grdtrf.loadGradientTransform(d,!0):(grdtrf.rotateTextEdit.setValue("?"),grdtrf.scaleTextEdit.setValue("?"),grdtrf.lnscales.setValue(1E3),grdtrf.showRotateAg())},getBase:function(b){b=svgtk.getHref(b);return null!=b?svgtk.find(b.substr(b.indexOf("#")+1)):null},setModified:function(b){grdtrf.bModified=b;grdtrf.disableCopyCustomize()},setGradient:function(b){var c=svgtk.getId(b);grdtrf.rotate=
grdtrf.scale=null;grdtrf.gradient=b;grdtrf.base=grdtrf.getBase(b);grdtrf.bModified=!1;grdtrf.baseTransform=!1;grdtrf.gradientTransform=b;grdtrf.setEnabledFields(!0);grdtrf.loadTransform();svgtk.setTextData(svgtk.get("gradient-id"),c)},ensureTransform:function(){grdtrf.baseTransform&&(svgtk.setA(grdtrf.gradient,"gradientTransform",svgtk.getA(grdtrf.gradientTransform,"gradientTransform")),svgtk.setFill(svgtk.get("rotate-title"),"black"),svgtk.setFill(svgtk.get("scale-title"),"black"),grdtrf.loadTransform())},
ensureRotate:function(){grdtrf.ensureTransform();if(null==grdtrf.rotate){var b=grdtrf.gradient.gradientTransform.baseVal,c=b.createSVGTransformFromMatrix(svgtk.getRoot(grdtrf.gradient).createSVGMatrix().rotate(0));grdtrf.rotate=0==b.numberOfItems?b.initialize(c):b.insertItemBefore(c,0);grdtrf.rotateTextEdit.setValue(svgtk.numberFixDigit(grdtrf.rotate.angle,2));grdtrf.showRotateAg();svgtk.setFill(svgtk.get("rotate-title"),"black")}},ensureScale:function(){grdtrf.ensureTransform();grdtrf.ensureRotate();
if(null==grdtrf.scale){var b=grdtrf.gradient.gradientTransform.baseVal,c=b.createSVGTransformFromMatrix(svgtk.getRoot(grdtrf.gradient).createSVGMatrix().scale(1));grdtrf.scale=1==b.numberOfItems?b.appendItem(c):b.insertItemBefore(c,1);grdtrf.scaleTextEdit.setValue(svgtk.numberFixDigit(grdtrf.scale.matrix.a,2));grdtrf.lnscales.setValue(Math.pow(10,grdtrf.scale.matrix.a)).setEnabled(!0);svgtk.setFill(svgtk.get("scale-title"),"black")}},onClickTextEditScale:function(b){null!=grdtrf.gradient&&(grdtrf.ensureScale(),
grdtrf.scaleTextEdit.onclick(b))},onTextEditScale:function(b,c,d){return 1==/^[+]?[0-9]*\.?[0-9]+$/.test(c)?(grdtrf.setScale(parseFloat(c)),c):d},setScale:function(b){grdtrf.ensureScale();grdtrf.scale.setScale(b,b);grdtrf.scaleTextEdit.setValue(svgtk.numberFixDigit(grdtrf.scale.matrix.a,2));grdtrf.lnscales.setValue(Math.pow(10,grdtrf.scale.matrix.a));grdtrf.setModified()},onLogScaleDownCB:function(b,c,d){null!=grdtrf.gradient&&grdtrf.ensureScale()},onLogScaleCB:function(b){b=Math.log(b)/Math.LN10;
null!=grdtrf.gradient&&grdtrf.setScale(b)},onLogScaleRect:function(b){null!=grdtrf.gradient&&(b=10*svgtk.getX(b.target)+1.5,grdtrf.lnscales.setValue(b),grdtrf.onLogScaleCB(b))},onClickTextEditRotate:function(b){null!=grdtrf.gradient&&(grdtrf.ensureRotate(),grdtrf.rotateTextEdit.onclick(b))},onTextEditRotate:function(b,c,d){return 1==/^[-+]?[0-9]*\.?[0-9]+$/.test(c)?(grdtrf.setRotateAngle(c),c):d},setRotateAngle:function(b){null!=grdtrf.gradient&&(grdtrf.ensureRotate(),grdtrf.rotate.setRotate(parseFloat(b),
0,0),grdtrf.rotateTextEdit.setValue(b),grdtrf.showRotateAg(),grdtrf.setModified())},onRotateDownCB:function(b,c,d){null!=grdtrf.gradient&&(grdtrf.ensureRotate(),grdtrf.rotateCnt=0)},onRotateMoveCB:function(b){b=grdtrf.setRotateAgAngle(grdtrf.rotateAgTransform.angle+b)%180;grdtrf.rotateTextEdit.setValue(svgtk.numberFixDigit(b,2));grdtrf.rotate.setRotate(b,0,0);grdtrf.rotateCnt++},onRotateUpCB:function(b){0!=grdtrf.rotateCnt&&grdtrf.setModified()},onRotatePath:function(b){null!=grdtrf.gradient&&grdtrf.setRotateAngle(b.target.transform.baseVal.getItem(0).angle+
15)},allocId:function(b){var c=svgtk.getId(grdtrf.gradient),d=svgtk.getId(grdtrf.target),f=1,d=null==d?b+c:d+"_gradient";if(null==svgtk.find(d))return d;for(;null!=svgtk.find(d+f);)f++;return d+f},showTip:function(b,c){"btn"==svgtk.getClass(b.target)&&svgtk.show(svgtk.get(c))},hideTip:function(b,c){"btn"==svgtk.getClass(b.target)&&svgtk.hide(svgtk.get(c))},disableCopyCustomize:function(){grdtrf.bEnabled&&(svgtk.setClass(svgtk.get("copyBtnRect"),"btnDisabled"),svgtk.setClass(svgtk.get("customizeBtnRect"),
"btnDisabled"),grdtrf.bEnabled=!1)},onCustomize:function(b){if(grdtrf.bEnabled){var c=grdtrf.allocId("extends_");grdtrf.setGradient(svgtk.setHref(svgtk.setId(svgtk.appendChild(grdtrf.gradient.parentNode,grdtrf.gradient.tagName),c),"#"+svgtk.getId(grdtrf.gradient)));svgtk.setFillPattern(grdtrf.target,c);grdtrf.hideTip(b,"customize-tip");grdtrf.disableCopyCustomize();svgtk.setTextData(svgtk.get("gradient-id"),c);grdtrf.bCustomize=!0}},onCopy:function(b){if(grdtrf.bEnabled){var c=grdtrf.allocId("copyOf_");
grdtrf.setGradient(grdtrf.gradient.parentNode.appendChild(svgtk.setId(grdtrf.gradient.cloneNode(!0),c)));svgtk.setFillPattern(grdtrf.target,c);grdtrf.hideTip(b,"copy-tip");grdtrf.disableCopyCustomize();svgtk.setTextData(svgtk.get("gradient-id"),c);grdtrf.bCopy=!0}},onCadre:function(b){b.stopPropagation();b.preventDefault()},onApply:function(b){try{svgtk.callWindowParentFunction2("onGradientTransformApply",grdtrf.bCopy,grdtrf.bCustomize)}catch(c){alert("grdtrf.onApply "+c)}},onClose:function(b){svgtk.callWindowParentFunction("onGradientTransformClose")},
demoInit:function(b){try{grdtrf.init(b);var c=svgtk.get("demo"),d=svgtk.get(svgtk.getFillGrd(c));grdtrf.setTarget(c,d);svgtk.hide(svgtk.get("gradientTransformApplyText"));svgtk.hide(svgtk.get("gradientTransformApplyRect"));svgtk.hide(svgtk.get("gradientTransformCloseGroup"))}catch(f){alert("demoinit "+f)}}};window.grdtrf_init=grdtrf.init;window.grdtrf_setTarget=grdtrf.setTarget;window.grdtrf_demoInit=grdtrf.demoInit;window.grdtrf_onClickTextEditRotate=grdtrf.onClickTextEditRotate;
window.grdtrf_onClickTextEditScale=grdtrf.onClickTextEditScale;window.grdtrf_onLogScaleRect=grdtrf.onLogScaleRect;window.grdtrf_onRotatePath=grdtrf.onRotatePath;window.grdtrf_showTip=grdtrf.showTip;window.grdtrf_hideTip=grdtrf.hideTip;window.grdtrf_onCopy=grdtrf.onCopy;window.grdtrf_onCustomize=grdtrf.onCustomize;window.grdtrf_onCadre=grdtrf.onCadre;window.grdtrf_onClose=grdtrf.onClose;window.grdtrf_onApply=grdtrf.onApply;window.grdtrf_applyOnCopy=function(){return grdtrf.bCopy};
window.grdtrf_applyOnCustomize=function(){return grdtrf.bCustomize};
]]></script></defs></g></g></g></svg>